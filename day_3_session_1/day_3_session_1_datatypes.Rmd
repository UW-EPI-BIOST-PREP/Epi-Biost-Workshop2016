---
title: 'Day 3: Data types and data structures'
subtitle: "EPI/BIOST Bootcamp 2016"
author: "Brian D. Williamson"
date: "27 September, 2016"
output: slidy_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Data types
- How is data stored? What type of data are we working with?
- A *data type* is a basic building block, and tells us how the data is stored
- R has three basic data types: numeric, character, and logical
- R also has two more complex data types: special numerics and logicals, and factors

## Numeric
- Decimal numbers
- Two types: 
    - Integers - whole numbers, e.g. 1
    - Doubles - real numbers (a whole number plus a fractional part), e.g. 1.5
- R designates these two as `int` and `num`
- Example: `age` variable in the `mri` data from the `uwIntroStats` package
```{r, message = FALSE, warning = FALSE}
## load the uwIntroStats package
library(uwIntroStats)

## load the mri data
data(mri)

## check the storage type of age
str(mri$age)
```
- Example: `weight` variable in the `mri` data from the `uwIntroStats` package
```{r}
str(mri$weight)
```

## Character
- Strings: words and letters, e.g. "Hello World!"
- R designates these as `chr`
- Example: "Mary had a little lamb" 
```{r}
str("Mary had a little lamb")
```
- Example: "A", "B", "C", "D", "E"
```{r}
str(c("A", "B", "C", "D", "E"))
```

## Logical
- `TRUE` or `FALSE`
- R designates these as `logi`
- `TRUE` corresponds to 1, `FALSE` to 0
- Produced by comparisons - the standard operators are:

Operator | Meaning | Return
:---:|:---:|---:
\| | or | `TRUE` if any argument is `TRUE`
& | and | `TRUE` only if all arguments are `TRUE`
! | negation | `FALSE` if argument returns `TRUE`, `TRUE` else
== | equals | `TRUE` if the two arguments are equal

- Examples:
    - Test if 1 equals 2: 1 == 2
    - Test if 1 equals 2 or 2 equals 2: (1 == 2) | (2 == 2)
    - Opposite of 1 equals 2: !(1 == 2)
    - Test equality of strings: "A" == "B"
    
## Special numeric
- R's way to handle invalid mathematical operations
- Two special numerics:
    - `Inf`: infinity. Defined as any nonzero number divided by zero 
        - one way this can occur is division by a very small number that R rounds to zero!
    - `NaN`: not a number. Defined as 0/0

## Special logical
- R's way to handle missing data
- `NA`: missing data
- R is essentially saying "I don't know what is supposed to go here"

## The null object
- `NULL`: the null object
- Improperly defined functions or expressions can sometimes return `NULL`

## Factors
- Store character strings (names) and numerical values
- Sometimes useful for keeping data organized
- Example: `male`, coded as 1 for female and 2 for male
    - a factor has these numeric values assigned to "Female" and "Male", or "F" and "M"
    
## Functions to check data types
- The `str` function returns the data type of a variable
- Example: `age` from the `mri` data
```{r, echo = TRUE}
str(mri$age)
```
- The class of `is.` functions perform logical comparisons
    - `is.numeric()` tests whether the variable is numeric or not
    - `is.character()` tests whether the variable is a character or not
    - `is.logical()` tests whether the variable is logical or not
    - `is.finite()` and `is.infinite()` test whether each value is finite or infinite
    - `is.na()` tests whether each value is `NA` or not
- Example: `age` from the `mri` data
```{r, echo = TRUE}
is.numeric(mri$age)
sum(is.na(mri$age))
```

## Exercise: data types
1. What is the data type of:
    1. 1?
    2. 2.5?
    3. `TRUE`
    4. "Seattle"
2. What do the following comparisons return?
    1. "A" == "B"
    2. ("A" == "A") & (1 == 1)
3. What does `is.na(1)` return?

## Solution: data types
1. Solutions are:
    1. Numeric, integer, `int`
    2. Numeric, double, `num`
    3. Logical, `logi`
    4. Character, `chr`
2. Solutions:
    1. `FALSE`
    2. `TRUE`
3. `FALSE`

## Data structures
- Equally important to what type of data we have is how it is stored
- *Data structures* are the various ways that R stores data
- We have been working with data structures implicitly already - each variable is part of a data structure
- Five basic data structures in R:
    - Vectors
    - Matrices
    - Arrays
    - Data frames
    - Lists

## Vectors
- Store any number of individual values
- All values must be the same data type
    - If not, R will force all values to be the same type (with perhaps varying results)
- Create vectors with `c()`
- Examples:
    - vector of strings: `c("Mary", "had", "a", "little", "lamb")`
    - vector of integers: `c(1, 2, 3, 4, 5)`
    
```{r, echo = TRUE}
## same string as before
c("Mary", "had", "a", "little", "lamb")

## trying two data types
c("Hello", "number", 1)
c(1, "2", 3)
```

## Matrices
- Tables, or two-dimensional vectors
- All values must be the same data type
- Must be rectangular: number of rows in each column is equal, and number of columns in each row is equal 
- Create matrices with `matrix(vector, nrow, ncol, byrow, dimnames)`
    1. Create a vector inside this call with `c()`
    2. Specify how many rows (`nrow`) and/or columns (`ncol`)
    3. Specify whether to read in values across rows (`byrow = TRUE`) or down columns (`FALSE`)
    4. (optional) Specify the names of the dimensions, in a list

## Matrices: examples
```{r, echo = TRUE}
## create a matrix from a vector of numbers
matrix(c(1, 0, 0, 1), nrow = 2, ncol = 2, byrow = TRUE)

## matrix from a vector of words (matrices can be non-square)
matrix(c("This", "is", "a", "matrix"), nrow = 1, byrow = TRUE)
```

## Arrays
- Higher-order matrices (a matrix is also a 2-D array)
- All values must be the same data type
- Must be rectangular, like matrices
- Create with `array(vector, dim)`
    1. Create a vector with `c()`
    2. Use `dim` to specify an integer vector with the maximum number of indices in each dimension
    3. (optional) Specify the names of the dimensions, in a list

## Arrays: examples
```{r, echo = TRUE}
## 1-D array, or vector
array(c(1, 2, 3, 4), dim = 4)

## 2-D array, or matrix
array(c(1, 0, 0, 1), dim = c(2, 2))

## 3-D array (an array with two 2-D sub-arrays)
array(c(1, 0, 0, 1, 1, 0, 0, 1), dim = c(2, 2, 2))
```

## Data frames
- A table, like a matrix
- Columns may have different data types
    - For this reason, data frames are a common storage mode in R
- Each column must have the same number of rows
- Create with `data.frame(..., row.names, stringsAsFactors)`
    1. `...` is a special object, meaning that we can put anything here: a comma separated list of vectors, matrices etc., or many other objects
    2. (optional) Specify the names of the columns using `=`, with the name on the left and the object on the right
    3. (optional) Specify the names of the rows using `row.names`
    4. (optional) Convert strings to factors if possible (`stringsAsFactors = TRUE`)

## Data frames: examples
```{r, echo = TRUE}
data.frame(c(1,2,3), c("UW", "is", "awesome")) ## data frame with no column names
data.frame(nums = c(1,2,3), words = c("UW", "is", "awesome")) ## data frame with column names
data.frame(nums = c(1,2,3), words = c("UW", "is", "awesome"), mat = matrix(c(1, 0, 0, 0, 0, 1), nrow = 3)) ## input vectors and matrices
```

## Lists
- An ordered collection of objects
- Each object can have a different data type, or can be any data structure
- Created by `list(...)`
    - Again the `...`! So lots of things can go here!
    - We can also name objects using `=`, like in `data.frame()`
    
## Lists: examples
```{r, echo = TRUE}
list(1, "UW", 2, "is", 3, "awesome") ## list with single characters and strings
list(df = data.frame(nums = c(1,2,3), words = c("UW", "is", "awesome")), mat = matrix(c(1, 0, 0, 0, 0, 1), nrow = 3)) ## list with named data frame and matrix
```

## Exercise: data structures
1. 